<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Village Data Collection</title>
  <script>
    function getLocationAndSubmit() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendData, showError);
      } else {
        alert("Geolocation not supported by your browser.");
      }
    }

    function sendData(position) {
      const name = document.getElementById("name").value;
      const village = document.getElementById("village").value;
      const latitude = position.coords.latitude;
      const longitude = position.coords.longitude;

      fetch(https://script.google.com/macros/s/AKfycbwS1f3jXpu2auHEpCaHYoZs1wts7cGOUAI3lYhkMdVybBtcA3uhUhw2VjeCQojBFtvk/exec, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          name: name,
          village: village,
          latitude: latitude,
          longitude: longitude
        })
      })
      .then(response => alert("Data submitted successfully!"))
      .catch(error => alert("Submission failed: " + error.message));
    }

    function showError(error) {
      alert("Location access error: " + error.message);
    }
  </script>
</head>
<body>
  <h2>Village Data Collection Form</h2>
  <form onsubmit="event.preventDefault(); getLocationAndSubmit();">
    <label>Name:</label>
    <input type="text" id="name" required><br><br>
    
    <label>Village:</label>
    <input type="text" id="village" required><br><br>

    <button type="submit">Submit with Location</button>
  </form>
</body>
</html>
